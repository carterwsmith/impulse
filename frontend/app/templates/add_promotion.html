<!-- add_promotion.html -->
{% extends 'base.html' %}

{% block content %}

<h2>Add a New Promotion</h2>
<form id="addPromotionModalForm" method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Add Promotion</button>
</form>
<a href="{% url 'promotions' %}"><button>Go back</button></a>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var isAiGeneratedCheckbox = document.getElementById('is_ai_generated');
        var aiFields = ['ai_description', 'ai_discount_percent_min', 'ai_discount_percent_max', 'ai_discount_dollars_min', 'ai_discount_dollars_max',];
        var nonAiFields = ['display_title', 'display_description', 'discount_percent', 'discount_dollars'];
    
        function toggleFieldsOn(fields) {
            fields.forEach(function(fieldId) {
                var field = document.getElementById(fieldId);
                field.style.display = 'block';
                var label = document.querySelector('label[for="' + fieldId + '"]');
                if (label) {
                    label.style.display = 'block';
                }
            });
        }

        function toggleFieldsOff(fields) {
            fields.forEach(function(fieldId) {
                var field = document.getElementById(fieldId);
                field.style.display = 'none';
                field.value = ''; // Clear the field value
                var label = document.querySelector('label[for="' + fieldId + '"]');
                if (label) {
                    label.style.display = 'none';
                }
            });
        }

        if (isAiGeneratedCheckbox.checked) {
            toggleFieldsOn(aiFields);
            toggleFieldsOff(nonAiFields);
        } else {
            toggleFieldsOff(aiFields);
            toggleFieldsOn(nonAiFields);
        }
    
        isAiGeneratedCheckbox.addEventListener('change', function() {
            if (this.checked) {
                toggleFieldsOn(aiFields);
                toggleFieldsOff(nonAiFields);
            } else {
                toggleFieldsOff(aiFields);
                toggleFieldsOn(nonAiFields);
            }
        });

    });
    </script>

{% endblock %}